{% load i18n %}
{% load bootstrap_icons %}
{% load crispy_forms_tags %}

<div class="row">
    <div id="div_events_id" class="col-3">
        <div class="card">
            <div class="card-header">
                <div class="row">
                    <div class="card-title col" title="{% trans 'The event list allows bulk loading of events from various file formats. Once created, events can be selected from this list to show more details about the events on the event details card. When event validation is run events containing issues will be highlighted in the list.' %}">{% custom_icon 'question-circle' %}{% trans "Events" %}</div>
                    <div class="col-auto">
{#                        <a class="btn btn-primary btn-sm" href="{% url 'core:elog_config' mission.pk %}"#}
{#                           title="{% trans "Elog Config" %}">{% custom_icon 'body-text' %}</a>#}

                        <div class="dropdown">
                            <button class="btn btn-primary btn-sm dropdown-toggle" type="button" id="importDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            {% trans "Import" %} {% custom_icon 'arrow-up-square' %}
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="importDropdown">
                                <li><label for="andes_event_file_input_id" class="dropdown-item" title="{% trans "Upload events from andes report" %}">Andes</label></li>
                                <li><button hx-swap="none" hx-get="{% url 'core:form_event_import_events_btl' mission.pk %}" for="btl_event_file_input_id" class="dropdown-item" title="{% trans "Upload events from fixstation BTL files" %}">BTL</button></li>
                                <li><label for="csv_event_file_input_id" class="dropdown-item" title="{% trans "Upload events from csv files" %}">CSV</label></li>
                                <li><label for="elog_event_file_input_id" class="dropdown-item" title="{% trans "Upload events from elog files" %}">Elog</label></li>
                            </ul>
                        </div>
                    </div>
                </div>
                    {% block event_import_form %}
                <div id="div_id_event_message_area" class="row">
                    <div id="div_id_bottle_event_message">
                        {# special case for bottle event loading #}
                    </div>
                    <form name="elog_upload_file_form_id" id="elog_upload_file_form_id"
                          hx-encoding="multipart/form-data"
                          hx-get="{% url "core:form_event_import_events_elog" mission.pk %}"
                          hx-trigger="change"
                          hx-swap="none"
                    >
                        <input id="csv_event_file_input_id" type="file" name="csv_event" accept=".csv"
                               multiple="true" class="invisible"/>
                        <input id="elog_event_file_input_id" type="file" name="elog_event" accept=".log"
                               multiple="true" class="invisible"/>
                        <input id="andes_event_file_input_id" type="file" name="andes_event" accept=".json"
                               multiple="false" class="invisible"/>
                    <div id="div_id_event_alert"></div>
                    </form>
                </div>
                    {% endblock %}
            </div>
            <div class="card-body vertical-scrollbar">
                <div id="div_event_list_id" class="row">
                    {% include 'core/partials/table_event.html' %}
                </div>
            </div>
        </div>
    </div>
    <div id="div_event_details_id" class="col-9">
        {% if details_form %}
            <form hx-encoding="multipart/form-data">
            {% crispy details_form %}
            </form>
        {% endif %}
    </div>
</div>